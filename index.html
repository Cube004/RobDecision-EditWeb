<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>全屏Canvas</title>
  <link rel="stylesheet" href="./css/style.css">
  <link rel="stylesheet" href="./css/tools.css">
  <link rel="stylesheet" href="./css/nodemenu.css">
  <link rel="stylesheet" href="./css/color-section.css">
  <link rel="stylesheet" href="./css/new.css">
  <script type="module" src="./js/manager.js" defer></script>
  <script type="module" src="./js/menu.js" defer></script>
  <script type="module" src="./js/button.js" defer></script>
  <script type="module" src="./js/graph.js"></script>
  <script type="module" src="./js/script.js" defer></script> 

</head>
<body>
    <div class="status-bar" id="statusBar">
        <div class="status-icon" id="statusIcon"></div>
        <div class="status-text" id="statusText">准备就绪</div>
    </div>
    
    <div class="canvas-container">
      <canvas id="background-layer"></canvas>  <!-- 背景层 -->
      <canvas id="storage-layer"></canvas> <!-- 存储层 -->
      <div id = "edgeContainer" style="width: 100%; height: 100%;"></div>
      <div id = "nodeContainer" style="width: 100%; height: 100%;"></div>
      <canvas id="operate-layer"></canvas> <!-- 操作层 -->
    </div>

    <div class="tools">
      <div class="tools-item">
        <button id="cursor" onclick="cursor(this)" title="选择工具">
          <img src="css\鼠标.png" width="20px">
        </button>
      </div>
      <div class="tools-item divider"></div>
      
      <div class="tools-item">
        <button id="renderTaskNode" onclick="renderTaskNode(this)" title="添加任务节点">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="2.9" y="4.9" width="18.2" height="14.2" rx="3.1" stroke="currentColor" stroke-width="1.8">
            </rect>
          </svg>
        </button>
      </div>
      
      
      <div class="tools-item">
        <button id="renderNodeEdge" onclick="renderNodeEdge(this)" title="添加连接线">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18.7491 7.72104L11.525 7.72104L11.525 9.62563L18.7491 9.62563L15.6132 12.7615C15.5222 12.8494 15.4497 12.9545 15.3998 13.0706C15.3499 13.1868 15.3236 13.3118 15.3225 13.4382C15.3214 13.5647 15.3455 13.6901 15.3934 13.8071C15.4413 13.9241 15.512 14.0305 15.6014 14.1199C15.6908 14.2093 15.7971 14.28 15.9141 14.3279C16.0312 14.3758 16.1566 14.3999 16.283 14.3988C16.4095 14.3977 16.5344 14.3714 16.6506 14.3215C16.7668 14.2716 16.8719 14.199 16.9597 14.1081L21.7212 9.3466C21.8997 9.16802 22 8.92585 22 8.67333C22 8.42082 21.8997 8.17864 21.7212 8.00006L16.9597 3.2386C16.8719 3.14765 16.7668 3.0751 16.6506 3.02519C16.5344 2.97528 16.4095 2.94901 16.283 2.94791C16.1566 2.94681 16.0312 2.97091 15.9141 3.01879C15.7971 3.06667 15.6908 3.13738 15.6014 3.2268C15.512 3.31621 15.4413 3.42254 15.3934 3.53957C15.3455 3.6566 15.3214 3.782 15.3225 3.90844C15.3236 4.03489 15.3499 4.15985 15.3998 4.27603C15.4497 4.39221 15.5222 4.4973 15.6132 4.58514L18.7491 7.72104Z" fill="currentColor"></path><path d="M11.5229 9.62454C10.997 9.62454 10.5706 10.0509 10.5706 10.5768V18.1952C10.5706 19.773 9.29156 21.052 7.71375 21.052H2.95229C2.42636 21.052 2 20.6257 2 20.0998C2 19.5738 2.42636 19.1475 2.95229 19.1475H7.71375C8.23969 19.1475 8.66605 18.7211 8.66605 18.1952V10.5768C8.66605 8.99902 9.94511 7.71996 11.5229 7.71996V9.62454Z" fill="currentColor">
            </path>
          </svg>
        </button>
      </div>
    
      <div class="tools-item divider"></div>
    
      <div class="tools-item">
        <button id="help" title="帮助信息">
          <img src="css\帮助.png" width="22px">
        </button>
      </div>
    
      <div class="tools-item">
        <button id="info" title="版本信息">
          <img src="css\版本信息提示.png" width="22px">
        </button>
      </div>
    
      <div class="tools-item divider"></div>
    
      <div class="tools-item">
        <button id="save" title="保存">
          <img src="css\保存.png" width="22px">
        </button>
      </div>
    
      <div class="tools-item">
        <button id="sync" title="同步">
          <img src="css\同步.png" width="22px">
        </button>
      </div>
    </div>
    
    <div class="menu" id = "menu">
      <div class="menu-item" id="move">
        <button id ="node-move">
          <div class= "icon" >
            <svg style="fill: #666" width="22" height="22" t="1740490225002" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2005" width="256" height="256"><path d="M510.7 896.2c-15.3 0-28.7-11.3-31.4-26.6-0.7-4-0.6-7.9 0.1-11.7 1.7-43.3 0.6-444.5-0.6-710.7-0.1-17.5 14-31.7 31.5-31.8h0.1c17.4 0 31.6 14.1 31.7 31.5 0 0 0.8 179.3 1.3 358.7 0.2 89.7 0.3 179.4 0.2 246.8-0.3 141-0.3 141-30.2 143.7-0.9 0.1-1.8 0.1-2.7 0.1z" fill="#666666" p-id="2006"></path><path d="M330.2 538.2h-65.5c-141-0.3-141-0.3-143.7-30.2-1.5-16.4 10.3-31.3 26.5-34.1 4-0.7 8-0.6 11.7 0.1 43.3 1.8 444.4 0.6 710.7-0.6h0.1c17.4 0 31.6 14.1 31.7 31.5 0.1 17.5-14 31.7-31.5 31.8 0 0-179.3 0.8-358.7 1.3-63 0.1-126 0.2-181.3 0.2zM614.8 250c-8.1 0-16.2-3.1-22.4-9.3L512 160.4l-80.4 80.4c-12.4 12.4-32.4 12.4-44.8 0-12.4-12.4-12.4-32.4 0-44.8L489.6 93.2c12.4-12.4 32.4-12.4 44.8 0L637.2 196c12.4 12.4 12.4 32.4 0 44.8-6.2 6.1-14.3 9.2-22.4 9.2zM512 920.5c-8.1 0-16.2-3.1-22.4-9.3L386.8 808.4c-12.4-12.4-12.4-32.4 0-44.8 12.4-12.4 32.4-12.4 44.8 0L512 844l80.4-80.4c12.4-12.4 32.4-12.4 44.8 0 12.4 12.4 12.4 32.4 0 44.8L534.4 911.2c-6.2 6.2-14.3 9.3-22.4 9.3zM795.8 636.6c-8.1 0-16.2-3.1-22.4-9.3-12.4-12.4-12.4-32.4 0-44.8l80.4-80.4-80.4-80.4c-12.4-12.4-12.4-32.4 0-44.8 12.4-12.4 32.4-12.4 44.8 0L921 479.8c12.4 12.4 12.4 32.4 0 44.8L818.2 627.4c-6.2 6.1-14.3 9.2-22.4 9.2zM228.2 636.6c-8.1 0-16.2-3.1-22.4-9.3L103 524.6c-12.4-12.4-12.4-32.4 0-44.8L205.8 377c12.4-12.4 32.4-12.4 44.8 0 12.4 12.4 12.4 32.4 0 44.8l-80.4 80.4 80.4 80.4c12.4 12.4 12.4 32.4 0 44.8-6.2 6.1-14.3 9.2-22.4 9.2z" fill="#666666" p-id="2008"></path></svg>
          </div>
          
          <div class="unline">
            <svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DownBoldOutlined"><path d="m3.414 7.086-.707.707a1 1 0 0 0 0 1.414l7.778 7.778a2 2 0 0 0 2.829 0l7.778-7.778a1 1 0 0 0 0-1.414l-.707-.707a1 1 0 0 0-1.415 0l-7.07 7.07-7.072-7.07a1 1 0 0 0-1.414 0Z" fill="currentColor"></path></svg>
          </div>
        </button>
      </div>

      <div class="menu-item" id="size">
        <button id ="node-size">
          <div class="icon">
            <svg style="fill: #666" width="25" height="25" t="1740490858086" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9330" width="256" height="256"><path d="M368.64 194.56a10.24 10.24 0 0 1 1.19808 20.40832L368.64 215.04H229.5296l282.46016 282.4704L794.46016 215.04H655.36a10.24 10.24 0 0 1-10.16832-9.04192L645.12 204.8a10.24 10.24 0 0 1 9.04192-10.16832L655.36 194.56h164.0448c0.23552 0 0.47104 0.02048 0.7168 0.04096L819.2 194.56a10.32192 10.32192 0 0 1 6.31808 2.18112c0.64512 0.512 1.2288 1.08544 1.7408 1.7408l-0.8192-0.9216a10.32192 10.32192 0 0 1 2.92864 6.0416l0.03072 0.3072 0.03072 0.5632L829.44 204.8v163.84a10.24 10.24 0 0 1-20.40832 1.19808L808.96 368.64V229.51936L526.47936 512 808.96 794.4704V655.36a10.24 10.24 0 0 1 9.04192-10.16832L819.2 645.12a10.24 10.24 0 0 1 10.16832 9.04192L829.44 655.36v164.17792l-0.04096 0.53248L829.44 819.2a10.32192 10.32192 0 0 1-2.18112 6.31808c-0.512 0.64512-1.09568 1.2288-1.7408 1.7408l0.9216-0.8192a10.32192 10.32192 0 0 1-6.0416 2.92864l-0.32768 0.03072a10.30144 10.30144 0 0 1-0.53248 0.03072L819.2 829.44H655.36a10.24 10.24 0 0 1-1.19808-20.40832L655.36 808.96h139.1104L512 526.4896 229.51936 808.96H368.64a10.24 10.24 0 0 1 10.16832 9.04192L378.88 819.2a10.24 10.24 0 0 1-9.04192 10.16832L368.64 829.44H204.47232l-0.55296-0.04096L204.8 829.44a10.32192 10.32192 0 0 1-6.31808-2.18112 10.32192 10.32192 0 0 1-1.7408-1.7408l0.8192 0.9216a10.32192 10.32192 0 0 1-2.92864-6.0416l-0.03072-0.32768A10.30144 10.30144 0 0 1 194.56 819.4048V655.36a10.24 10.24 0 0 1 20.40832-1.19808L215.04 655.36v139.10016L497.5104 512 215.04 229.5296V368.64a10.24 10.24 0 0 1-9.04192 10.16832L204.8 378.88a10.24 10.24 0 0 1-10.16832-9.04192L194.56 368.64V204.8l0.03072-0.768 0.17408-1.29024 0.3072-1.13664 0.45056-1.13664 0.53248-1.00352 0.68608-0.98304 0.8192-0.9216a10.3424 10.3424 0 0 1 1.14688-0.99328l1.1264-0.72704 1.16736-0.55296 1.0752-0.3584 1.536-0.3072L204.8 194.56h163.84z" fill="#202020" p-id="9331"></path></svg>
          </div>
          
          <div class="unline">
            <svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DownBoldOutlined"><path d="m3.414 7.086-.707.707a1 1 0 0 0 0 1.414l7.778 7.778a2 2 0 0 0 2.829 0l7.778-7.778a1 1 0 0 0 0-1.414l-.707-.707a1 1 0 0 0-1.415 0l-7.07 7.07-7.072-7.07a1 1 0 0 0-1.414 0Z" fill="currentColor"></path></svg>
          </div>
        </button>
      </div>

      <div class="menu-item" id="borderRadius">
        <button id="node-border-radius">
          <div class="icon">
            <svg style="fill: #666" width="18" height="18" t="1740490382349" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7231"><path d="M543.231679 958.650786l-31.947511 0c-246.66318799 0-447.344056-200.692141-447.344055-447.366602L63.940113 479.33667399l-63.917567 1e-8 0 31.94751c0 281.92494199 229.359226 511.272895 511.261622 511.272896l31.947511 0 0-63.906294zM887.293063 974.635814l0 31.94751-77.050541 0 0-31.94751001zM752.01779 974.63581399l0 31.94751001-77.050541 0 0-31.94751zM945.517796 974.635814l0 31.94751L1023.988727 1006.583324l0-77.039268-31.958783 0 0 45.09175799zM752.01779 0.01128901l0 31.95878298-77.050541 1e-8L674.967249 0.011289zM616.742517 0.011289l0 31.958783-77.050541-1e-8L539.69197599 0.011289zM481.455971 0.011289l0 31.958783-77.039269 0L404.416702 0.011289zM887.293063 0.011289l0 31.958783-77.050541-1e-8L810.242522 0.01128901zM992.029944 31.97007199l0 27.69761201L1023.988727 59.667684 1023.988727 0.011289l-78.470931 0 0 31.958783zM75.630151 31.970072L75.630151 0.011289l-59.63385 0 0 96.936006 31.94751 0L47.943811 31.970072zM346.180697 0.011289l0 31.958783-77.039268 0L269.141429 0.011289zM210.905424 0.011289l0 31.958783-77.039268 0L133.866156 0.011289zM47.943811 155.172027l0 77.050541-31.94751 0 0-77.050541zM47.943811 290.4473l0 77.050542-31.94751 0 0-77.050542zM1023.988727 794.268783l0 77.039268-31.958783 0 0-77.039268zM1023.988727 253.16769l0 77.050541-31.958783 0 0-77.05054101zM1023.988727 388.442963l0 77.050541-31.958783-1e-8 0-77.05054099zM1023.988727 117.892416l0 77.050542-31.958783-1e-8 0-77.05054199zM1023.988727 658.99351l0 77.039268-31.958783 0 0-77.03926799zM1023.988727 523.718236l0 77.039268-31.958783-1e-8 0-77.039268z" p-id="7232"></path></svg>
          </div>
          
          <div class="unline">
            <svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DownBoldOutlined"><path d="m3.414 7.086-.707.707a1 1 0 0 0 0 1.414l7.778 7.778a2 2 0 0 0 2.829 0l7.778-7.778a1 1 0 0 0 0-1.414l-.707-.707a1 1 0 0 0-1.415 0l-7.07 7.07-7.072-7.07a1 1 0 0 0-1.414 0Z" fill="currentColor"></path></svg>
          </div>
        </button>
        
        <div class="radius-properties-content">
            <div class="radius-presets">
                <div class="control-label">圆角</div>
                <div class="radius-select-group">
                    <select id="radius-preset">
                        <option value="custom">自定义</option>
                        <option value="0">0格</option>
                        <option value="1">1格</option>
                        <option value="2">2格</option>
                        <option value="3">3格</option>
                    </select>
                    <div class="radius-input-group" id="custom-radius-group">
                        <input type="number" id="custom-radius" min="0" value="8">
                        <span class="unit">px</span>
                    </div>
                </div>
            </div>
        </div>
      </div>

      <div class="menu-item" id="borderColor">
        <button id="node-border-color">
          <div class="icon">
            <svg style="fill: #666" width="18" height="18" t="1740472612398" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4772"><path d="M512 64c60.5 0 119.2 11.8 174.4 35.2 53.3 22.6 101.3 54.9 142.4 96 41.2 41.2 73.5 89.1 96 142.4C948.2 392.8 960 451.5 960 512s-11.8 119.2-35.2 174.4c-22.6 53.3-54.9 101.3-96 142.4-41.2 41.2-89.1 73.5-142.4 96C631.2 948.2 572.5 960 512 960s-119.2-11.8-174.4-35.2c-53.3-22.6-101.3-54.9-142.4-96-41.2-41.2-73.5-89.1-96-142.4C75.8 631.2 64 572.5 64 512s11.8-119.2 35.2-174.4c22.6-53.3 54.9-101.3 96-142.4s89.1-73.5 142.4-96C392.8 75.8 451.5 64 512 64m0-64C229.2 0 0 229.2 0 512s229.2 512 512 512 512-229.2 512-512S794.8 0 512 0z" p-id="4773"></path></svg>
          </div>
          
          <div class="unline">
            <svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DownBoldOutlined"><path d="m3.414 7.086-.707.707a1 1 0 0 0 0 1.414l7.778 7.778a2 2 0 0 0 2.829 0l7.778-7.778a1 1 0 0 0 0-1.414l-.707-.707a1 1 0 0 0-1.415 0l-7.07 7.07-7.072-7.07a1 1 0 0 0-1.414 0Z" fill="currentColor"></path></svg>
          </div>
        </button>
        
        <div class="color-picker-content border-color-picker">
          <div class="color-grid">
            <div class="color-option" style="background-color: transparent; border: 1px solid #ddd;" data-color="transparent"></div>
            <div class="color-option" style="background-color: #FFFFFF; border: 1px solid #ddd;" data-color="#ffffff"></div>
            <div class="color-option" style="background-color: #f1f3f4;" data-color="#f1f3f4"></div>
            <div class="color-option" style="background-color: #d8b5ff;" data-color="#d8b5ff"></div>
            <div class="color-option selected" style="background-color: #4285f4;" data-color="#4285f4"></div>
            
            <div class="color-option" style="background-color: #d2e3fc;" data-color="#d2e3fc"></div>
            <div class="color-option" style="background-color: #ceead6;" data-color="#ceead6"></div>
            <div class="color-option" style="background-color: #fef6e0;" data-color="#fef6e0"></div>
            <div class="color-option" style="background-color: #fad2cf;" data-color="#fad2cf"></div>
            <div class="color-option add" id="add-custom-color">+</div>
            
            <div class="color-option" style="background-color: #000000;" data-color="#000000"></div>
            <div class="color-option" style="background-color: #5f6368;" data-color="#5f6368"></div>
            <div class="color-option" style="background-color: #bdc1c6;" data-color="#bdc1c6"></div>
            <div class="color-option" style="background-color: #8e24aa;" data-color="#8e24aa"></div>
            <div class="color-option" style="background-color: #4285f4;" data-color="#4285f4"></div>
            
            <div class="color-option" style="background-color: #4052b5;" data-color="#4052b5"></div>
            <div class="color-option" style="background-color: #137333;" data-color="#137333"></div>
            <div class="color-option" style="background-color: #b06000;" data-color="#b06000"></div>
            <div class="color-option" style="background-color: #ea4335;" data-color="#ea4335"></div>
          </div>
          
          <div class="custom-color-section" id="border-custom-color-section" style="display: none;">
            <div class="custom-color-header">自定义颜色</div>
            <div class="custom-color-input">
              <input type="color" id="border-custom-color" value="#4285f4">
              <input type="text" id="border-hex-value" value="#4285F4">
            </div>
            <button class="button" id="border-add-color-button">添加颜色</button>
          </div>
          
          <div class="opacity-control">
            <div class="opacity-label">
              <span>不透明度</span>
              <span id="border-opacity-value">100%</span>
            </div>
            <input type="range" min="0" max="100" value="100" class="opacity-slider" id="border-opacity-slider">
          </div>
        </div>
      </div>
      
      <div class="menu-item" id="fillColor">
        <button id="fillColor-button">
          <div class="icon">
            <svg style="fill: #666" width="18" height="18" t="1740474656283" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4934"><path d="M512 0C229.2 0 0 229.2 0 512s229.2 512 512 512 512-229.2 512-512S794.8 0 512 0z m316.8 828.8c-41.2 41.2-89.1 73.5-142.4 96C631.2 948.2 572.5 960 512 960s-119.2-11.8-174.4-35.2c-53.3-22.6-101.3-54.9-142.4-96-41.2-41.2-73.5-89.1-96-142.4C75.8 631.2 64 572.5 64 512s11.8-119.2 35.2-174.4c22.6-53.3 54.9-101.3 96-142.4s89.1-73.5 142.4-96C392.8 75.8 451.5 64 512 64s119.2 11.8 174.4 35.2c53.3 22.6 101.3 54.9 142.4 96 41.2 41.2 73.5 89.1 96 142.4C948.2 392.8 960 451.5 960 512s-11.8 119.2-35.2 174.4c-22.5 53.3-54.8 101.2-96 142.4z" p-id="4935"></path><path d="M512 512m-384 0a384 384 0 1 0 768 0 384 384 0 1 0-768 0Z" p-id="4936"></path></svg>
          </div>
          
          <div class="unline">
            <svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DownBoldOutlined"><path d="m3.414 7.086-.707.707a1 1 0 0 0 0 1.414l7.778 7.778a2 2 0 0 0 2.829 0l7.778-7.778a1 1 0 0 0 0-1.414l-.707-.707a1 1 0 0 0-1.415 0l-7.07 7.07-7.072-7.07a1 1 0 0 0-1.414 0Z" fill="currentColor"></path></svg>
          </div>
        </button>
        
        <div class="color-picker-content">
          <div class="color-grid">
            <div class="color-option" style="background-color: transparent; border: 1px solid #ddd;" data-color="transparent"></div>
            <div class="color-option" style="background-color: white; border: 1px solid #ddd;" data-color="#ffffff"></div>
            <div class="color-option" style="background-color: #f1f3f4;" data-color="#f1f3f4"></div>
            <div class="color-option" style="background-color: #d8b5ff;" data-color="#d8b5ff"></div>
            <div class="color-option selected" style="background-color: #4285f4;" data-color="#4285f4"></div>
            
            <div class="color-option" style="background-color: #d2e3fc;" data-color="#d2e3fc"></div>
            <div class="color-option" style="background-color: #ceead6;" data-color="#ceead6"></div>
            <div class="color-option" style="background-color: #fef6e0;" data-color="#fef6e0"></div>
            <div class="color-option" style="background-color: #fad2cf;" data-color="#fad2cf"></div>
            <div class="color-option add" id="add-custom-color">+</div>
            
            <div class="color-option" style="background-color: black;" data-color="#000000"></div>
            <div class="color-option" style="background-color: #5f6368;" data-color="#5f6368"></div>
            <div class="color-option" style="background-color: #bdc1c6;" data-color="#bdc1c6"></div>
            <div class="color-option" style="background-color: #8e24aa;" data-color="#8e24aa"></div>
            <div class="color-option" style="background-color: #4285f4;" data-color="#4285f4"></div>
            
            <div class="color-option" style="background-color: #4052b5;" data-color="#4052b5"></div>
            <div class="color-option" style="background-color: #137333;" data-color="#137333"></div>
            <div class="color-option" style="background-color: #b06000;" data-color="#b06000"></div>
            <div class="color-option" style="background-color: #ea4335;" data-color="#ea4335"></div>
          </div>
          
          <div class="custom-color-section" id="custom-color-section" style="display: none;">
            <div class="custom-color-header">自定义颜色</div>
            <div class="custom-color-input">
              <input type="color" id="custom-color" value="#4285f4">
              <input type="text" id="hex-value" value="#4285F4">
            </div>
            <button class="button" id="add-color-button">添加颜色</button>
          </div>
          
          <div class="opacity-control">
            <div class="opacity-label">
              <span>不透明度</span>
              <span id="opacity-value">100%</span>
            </div>
            <input type="range" min="0" max="100" value="100" class="opacity-slider" id="opacity-slider">
          </div>
        </div>
      </div>
      
      <div class="menu-item" id="textProperties">
        <button id="textProperties-button">
          <div class="icon">
            <svg data-id="T-icon" style="fill: #666" width="24" height="24" t="1741187965628" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17416" width="256" height="256">
              <path d="M747.24 345.95c-11.47 0-20.76-9.3-20.76-20.76v-20.76H297.51v20.76c0 11.46-9.29 20.76-20.76 20.76S256 336.65 256 325.19v-41.51c0-11.46 9.29-20.76 20.76-20.76h470.49c11.47 0 20.76 9.3 20.76 20.76v41.51c-0.01 11.46-9.3 20.76-20.77 20.76z" p-id="17417"></path>
              <path d="M512 761.08c-11.47 0-20.76-9.3-20.76-20.76V283.68c0-11.46 9.29-20.76 20.76-20.76 11.47 0 20.76 9.3 20.76 20.76v456.65c0 11.45-9.29 20.75-20.76 20.75z"  p-id="17418"></path>
              <path d="M581.19 761.08H442.81c-11.47 0-20.76-9.3-20.76-20.76s9.29-20.76 20.76-20.76h138.38c11.47 0 20.76 9.3 20.76 20.76s-9.29 20.76-20.76 20.76z"  p-id="17419"></path></svg>
          </div>
          
          <div class="unline">
            <svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DownBoldOutlined"><path d="m3.414 7.086-.707.707a1 1 0 0 0 0 1.414l7.778 7.778a2 2 0 0 0 2.829 0l7.778-7.778a1 1 0 0 0 0-1.414l-.707-.707a1 1 0 0 0-1.415 0l-7.07 7.07-7.072-7.07a1 1 0 0 0-1.414 0Z" fill="currentColor"></path></svg>
          </div>
        </button>
        
        <div class="text-properties-content">
          <div class="text-input-section">
            <div class="text-input-label">文本内容</div>
            <textarea id="node-text" rows="3" placeholder="请输入文本"></textarea>
          </div>
          
          <div class="text-style-section">
            <div class="text-size-control">
              <div class="control-label">字体大小</div>
              <div class="size-input-group">
                <input type="number" id="font-size" value="14" min="8" max="72">
                <span class="unit">px</span>
              </div>
            </div>
            
            <div class="text-color-control">
              <div class="control-label">文本颜色</div>
              <div class="color-grid">
                <div class="color-option" style="background-color: #000000;" data-color="#000000"></div>
                <div class="color-option" style="background-color: #5f6368;" data-color="#5f6368"></div>
                <div class="color-option" style="background-color: #4285f4;" data-color="#4285f4"></div>
                <div class="color-option" style="background-color: #137333;" data-color="#137333"></div>
                <div class="color-option" style="background-color: #ea4335;" data-color="#ea4335"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="menu-item">
        <button id = "taskConfig">
          <div class="icon">
            <svg style="fill: #666" width="20" height="20" t="1740491169910" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="27783" width="256" height="256"><path d="M504.6 715.3c-113.4 0-205.7-92.3-205.7-205.7 0-113.4 92.3-205.7 205.7-205.7 113.4 0 205.7 92.3 205.7 205.7 0 113.5-92.3 205.7-205.7 205.7z m0-371.8c-91.6 0-166.1 74.5-166.1 166.1S413 675.7 504.6 675.7s166.1-74.5 166.1-166.1c0.1-91.6-74.5-166.1-166.1-166.1z" fill="#3F3B3A" p-id="27784"></path><path d="M564 971.3H445.2c-21.8 0-39.6-17.8-39.6-39.6v-59.2c-30.7-8.3-60-20.5-87.6-36.3l-41.9 41.9c-15.4 15.4-40.5 15.4-56 0l-84-84c-15.4-15.4-15.4-40.5 0-56l41.9-41.9c-15.8-27.6-28-57-36.3-87.6H82.5c-21.8 0-39.6-17.8-39.6-39.6V450.3c0-21.8 17.8-39.6 39.6-39.6h59.2c8.3-30.7 20.5-60 36.3-87.6l-41.9-41.9c-15.4-15.4-15.4-40.5 0-56l84-84c15.4-15.4 40.5-15.4 56 0l41.9 41.9c27.6-15.8 57-28 87.6-36.3V87.5c0-21.8 17.8-39.6 39.6-39.6H564c21.8 0 39.6 17.8 39.6 39.6v59.2c30.7 8.3 60 20.5 87.6 36.3l41.9-41.9c15.4-15.4 40.5-15.4 56 0l84 84c15.4 15.4 15.4 40.5 0 56l-42 41.9c15.8 27.6 28 57 36.3 87.6h59.2c21.8 0 39.6 17.8 39.6 39.6V569c0 21.8-17.8 39.6-39.6 39.6h-59.2c-8.3 30.7-20.5 60-36.3 87.6l41.9 41.9c15.4 15.4 15.4 40.5 0 56l-84 84c-15.4 15.4-40.5 15.4-56 0l-41.9-41.9c-27.6 15.8-57 28-87.6 36.3v59.2c0.1 21.9-17.7 39.6-39.5 39.6zM312.1 786.1l13.4 8.4c32.2 20.3 67.3 34.8 104.3 43.2l15.4 3.5v90.5H564v-90.5l15.4-3.5c37-8.4 72.1-22.9 104.3-43.2l13.4-8.4 64 64 84-84-64-64 8.4-13.4c20.3-32.2 34.8-67.3 43.2-104.3l3.5-15.4h90.5V450.3h-90.5l-3.5-15.4c-8.4-37-22.9-72.1-43.2-104.3l-8.4-13.4 64-64-84-84-64 64-13.4-8.4c-32.2-20.3-67.3-34.8-104.3-43.2L564 178V87.5H445.2V178l-15.4 3.5c-37 8.4-72.1 22.9-104.3 43.2l-13.4 8.4-64-64-84 84 64 64-8.4 13.4c-20.3 32.2-34.8 67.3-43.2 104.3l-3.5 15.4H82.5V569H173l3.5 15.4c8.4 37 22.9 72.1 43.2 104.3l8.4 13.4-64 64 84 84 64-64z" fill="#3F3B3A" p-id="27785"></path></svg>
          </div>
          
          <div class="unline">
            <svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DownBoldOutlined"><path d="m3.414 7.086-.707.707a1 1 0 0 0 0 1.414l7.778 7.778a2 2 0 0 0 2.829 0l7.778-7.778a1 1 0 0 0 0-1.414l-.707-.707a1 1 0 0 0-1.415 0l-7.07 7.07-7.072-7.07a1 1 0 0 0-1.414 0Z" fill="currentColor"></path></svg>
          </div>
        </button>
      </div>

      <div class="menu-item" id="delete">
        <button id="delete-button">
            <div class="icon">
                <svg style="fill: #666" width="18" height="18" t="1741185246014" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14695" width="256" height="256"><path d="M834.24768 256c-14.15168 0-25.6 11.08992-25.6 24.79616v668.80512c0 13.66016-11.47392 24.80128-25.6 24.80128H226.74944c-14.12608 0-25.6-11.14112-25.6-24.80128V280.79616c0-13.70624-11.44832-24.79616-25.6-24.79616s-25.6 11.08992-25.6 24.79616v668.80512c0 41.02656 34.45248 74.39872 76.8 74.39872h556.29824c42.34752 0 76.8-33.37216 76.8-74.39872V280.79616c0-13.70624-11.44832-24.79616-25.6-24.79616zM336.21504 51.2h353.28a25.6 25.6 0 0 0 0-51.2h-353.28a25.6 25.6 0 0 0 0 51.2z" p-id="14696"></path><path d="M433.06496 846.99136v-558.08a25.6 25.6 0 0 0-51.2 0v558.08a25.6 25.6 0 0 0 51.2 0zM636.3392 846.99136v-558.08a25.6 25.6 0 0 0-51.2 0v558.08a25.6 25.6 0 0 0 51.2 0zM970.24 124.58496h-916.48a25.6 25.6 0 0 0 0 51.2h916.48a25.6 25.6 0 0 0 0-51.2z" p-id="14697"></path></svg>
            </div>
            
            <div class="unline">
                <svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DownBoldOutlined"><path d="m3.414 7.086-.707.707a1 1 0 0 0 0 1.414l7.778 7.778a2 2 0 0 0 2.829 0l7.778-7.778a1 1 0 0 0 0-1.414l-.707-.707a1 1 0 0 0-1.415 0l-7.07 7.07-7.072-7.07a1 1 0 0 0-1.414 0Z" fill="currentColor"></path></svg>
            </div>
        </button>
        
        <div class="delete-confirm-content">
            <div class="delete-message">
                <div class="warning-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm0-7a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm0-8a1 1 0 0 0-1 1v5a1 1 0 1 0 2 0V8a1 1 0 0 0-1-1z" fill="#f44336"/>
                    </svg>
                </div>
                <div class="message-text">
                    <div class="message-title">删除节点</div>
                    <div class="message-desc">此操作无法撤销</div>
                </div>
            </div>
            <button class="confirm-button">删除</button>
        </div>
      </div>
    </div>
    
    <!-- 边缘编辑菜单 -->
    <div class="menu edge-menu active" id="edgeMenu" style="top: 50%; left: 50%; transform: translate(-50%, -50%);">
      <div class="menu-item" id="edgeColor">
        <button id="edge-color-button">
          <div class="icon">
            <svg style="fill: #666" width="18" height="18"t="1741493527416" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12237" width="256" height="256"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" p-id="12238"></path></svg>
          </div>
          
          <div class="unline">
            <svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DownBoldOutlined"><path d="m3.414 7.086-.707.707a1 1 0 0 0 0 1.414l7.778 7.778a2 2 0 0 0 2.829 0l7.778-7.778a1 1 0 0 0 0-1.414l-.707-.707a1 1 0 0 0-1.415 0l-7.07 7.07-7.072-7.07a1 1 0 0 0-1.414 0Z" fill="currentColor"></path></svg>
          </div>
        </button>
        
        <div class="color-picker-content">
          <div class="color-grid">
            <div class="color-option" style="background-color: #000000;" data-color="#000000"></div>
            <div class="color-option" style="background-color: #5f6368;" data-color="#5f6368"></div>
            <div class="color-option" style="background-color: #bdc1c6;" data-color="#bdc1c6"></div>
            <div class="color-option selected" style="background-color: #4285f4;" data-color="#4285f4"></div>
            <div class="color-option" style="background-color: #8e24aa;" data-color="#8e24aa"></div>
            
            <div class="color-option" style="background-color: #4052b5;" data-color="#4052b5"></div>
            <div class="color-option" style="background-color: #137333;" data-color="#137333"></div>
            <div class="color-option" style="background-color: #b06000;" data-color="#b06000"></div>
            <div class="color-option" style="background-color: #ea4335;" data-color="#ea4335"></div>
            <div class="color-option add" id="add-edge-custom-color">+</div>
          </div>
          
          <div class="custom-color-section" id="edge-custom-color-section" style="display: none;">
            <div class="custom-color-header">自定义颜色</div>
            <div class="custom-color-input">
              <input type="color" id="edge-custom-color" value="#4285f4">
              <input type="text" id="edge-hex-value" value="#4285F4">
            </div>
            <button class="button" id="edge-add-color-button">添加颜色</button>
          </div>
        </div>
      </div>

      <div class="menu-item" id="edgeWidth">
        <button id="edge-width-button">
          <div class="icon">
            <svg style="fill: #666" width="20" height="20" t="1741493449011" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12079" width="256" height="256">
              <path d="M60 467h904v90H60z" fill="" p-id="12080">
              </path>
            </svg>
          </div>
          
          <div class="unline">
            <svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DownBoldOutlined"><path d="m3.414 7.086-.707.707a1 1 0 0 0 0 1.414l7.778 7.778a2 2 0 0 0 2.829 0l7.778-7.778a1 1 0 0 0 0-1.414l-.707-.707a1 1 0 0 0-1.415 0l-7.07 7.07-7.072-7.07a1 1 0 0 0-1.414 0Z" fill="currentColor"></path></svg>
          </div>
        </button>
        
        <div class="width-properties-content">
          <div class="width-presets">
            <div class="control-label">线条粗细</div>
            <div class="width-select-group">
              <select id="width-preset">
                <option value="1">1px</option>
                <option value="2" selected>2px</option>
                <option value="3">3px</option>
                <option value="4">4px</option>
                <option value="custom">自定义</option>
              </select>
              <div class="width-input-group" id="custom-width-group" style="display: none;">
                <input type="number" id="custom-width" min="1" max="10" value="2">
                <span class="unit">px</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="menu-item" id="edgeDirection">
        <button id="edge-direction-button">
          <div class="icon">
            <svg style="fill: #666" width="22" height="22" t="1741493351381" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10071" width="256" height="256"><path d="M330.624 130.88A21.333333 21.333333 0 0 0 320 149.333333v341.333334a21.333333 21.333333 0 0 0 31.914667 18.517333l298.666666-170.666667a21.333333 21.333333 0 0 0 0-37.034666l-298.666666-170.666667a21.333333 21.333333 0 0 0-21.290667 0.064zM596.992 320L362.666667 453.909333V186.090667L596.992 320zM693.376 893.12A21.333333 21.333333 0 0 0 704 874.666667V533.333333a21.333333 21.333333 0 0 0-31.914667-18.517333l-298.666666 170.666667a21.333333 21.333333 0 0 0 0 37.034666l298.666666 170.666667a21.333333 21.333333 0 0 0 21.290667-0.064zM427.008 704L661.333333 570.090667v267.818666L427.008 704z" fill="#000000" p-id="10072"></path><path d="M85.333333 512c0-117.824 95.509333-213.333333 213.333334-213.333333h64v42.666666h-64a170.666667 170.666667 0 1 0 0 341.333334h128v42.666666h-128C180.842667 725.333333 85.333333 629.824 85.333333 512zM938.666667 512c0 117.824-95.509333 213.333333-213.333334 213.333333h-64v-42.666666h64a170.666667 170.666667 0 1 0 0-341.333334h-128v-42.666666h128c117.824 0 213.333333 95.509333 213.333334 213.333333z" p-id="10073"></path></svg>
          </div>
          
          <div class="unline">
            <svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DownBoldOutlined"><path d="m3.414 7.086-.707.707a1 1 0 0 0 0 1.414l7.778 7.778a2 2 0 0 0 2.829 0l7.778-7.778a1 1 0 0 0 0-1.414l-.707-.707a1 1 0 0 0-1.415 0l-7.07 7.07-7.072-7.07a1 1 0 0 0-1.414 0Z" fill="currentColor"></path></svg>
          </div>
        </button>
        
        <div class="direction-content">
          <div class="direction-message">
            <div class="message-text">
              <div class="message-title">反转连接方向</div>
              <div class="message-desc">将起点和终点对调</div>
            </div>
          </div>
          <button class="confirm-button">反转方向</button>
        </div>
      </div>

      <div class="menu-item" id="edgeCondition">
        <button id="edge-condition-button">
          <div class="icon">
            <svg style="fill: #666" width="20" height="20" t="1740491169910" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="27783" width="256" height="256"><path d="M504.6 715.3c-113.4 0-205.7-92.3-205.7-205.7 0-113.4 92.3-205.7 205.7-205.7 113.4 0 205.7 92.3 205.7 205.7 0 113.5-92.3 205.7-205.7 205.7z m0-371.8c-91.6 0-166.1 74.5-166.1 166.1S413 675.7 504.6 675.7s166.1-74.5 166.1-166.1c0.1-91.6-74.5-166.1-166.1-166.1z" fill="#3F3B3A" p-id="27784"></path><path d="M564 971.3H445.2c-21.8 0-39.6-17.8-39.6-39.6v-59.2c-30.7-8.3-60-20.5-87.6-36.3l-41.9 41.9c-15.4 15.4-40.5 15.4-56 0l-84-84c-15.4-15.4-15.4-40.5 0-56l41.9-41.9c-15.8-27.6-28-57-36.3-87.6H82.5c-21.8 0-39.6-17.8-39.6-39.6V450.3c0-21.8 17.8-39.6 39.6-39.6h59.2c8.3-30.7 20.5-60 36.3-87.6l-41.9-41.9c-15.4-15.4-15.4-40.5 0-56l84-84c15.4-15.4 40.5-15.4 56 0l41.9 41.9c27.6-15.8 57-28 87.6-36.3V87.5c0-21.8 17.8-39.6 39.6-39.6H564c21.8 0 39.6 17.8 39.6 39.6v59.2c30.7 8.3 60 20.5 87.6 36.3l41.9-41.9c15.4-15.4 40.5-15.4 56 0l84 84c15.4 15.4 15.4 40.5 0 56l-42 41.9c15.8 27.6 28 57 36.3 87.6h59.2c21.8 0 39.6 17.8 39.6 39.6V569c0 21.8-17.8 39.6-39.6 39.6h-59.2c-8.3 30.7-20.5 60-36.3 87.6l41.9 41.9c15.4 15.4 15.4 40.5 0 56l-84 84c-15.4 15.4-40.5 15.4-56 0l-41.9-41.9c-27.6 15.8-57 28-87.6 36.3v59.2c0.1 21.9-17.7 39.6-39.5 39.6zM312.1 786.1l13.4 8.4c32.2 20.3 67.3 34.8 104.3 43.2l15.4 3.5v90.5H564v-90.5l15.4-3.5c37-8.4 72.1-22.9 104.3-43.2l13.4-8.4 64 64 84-84-64-64 8.4-13.4c20.3-32.2 34.8-67.3 43.2-104.3l3.5-15.4h90.5V450.3h-90.5l-3.5-15.4c-8.4-37-22.9-72.1-43.2-104.3l-8.4-13.4 64-64-84-84-64 64-13.4-8.4c-32.2-20.3-67.3-34.8-104.3-43.2L564 178V87.5H445.2V178l-15.4 3.5c-37 8.4-72.1 22.9-104.3 43.2l-13.4 8.4-64-64-84 84 64 64-8.4 13.4c-20.3 32.2-34.8 67.3-43.2 104.3l-3.5 15.4H82.5V569H173l3.5 15.4c8.4 37 22.9 72.1 43.2 104.3l8.4 13.4-64 64 84 84 64-64z" fill="#3F3B3A" p-id="27785"></path></svg>
          </div>
          
          <div class="unline">
            <svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DownBoldOutlined"><path d="m3.414 7.086-.707.707a1 1 0 0 0 0 1.414l7.778 7.778a2 2 0 0 0 2.829 0l7.778-7.778a1 1 0 0 0 0-1.414l-.707-.707a1 1 0 0 0-1.415 0l-7.07 7.07-7.072-7.07a1 1 0 0 0-1.414 0Z" fill="currentColor"></path></svg>
          </div>
        </button>
        
        <div class="condition-properties-content">
          <div class="condition-input-section">
            <div class="condition-input-label">条件表达式</div>
            <textarea id="edge-condition" rows="3" placeholder="请输入条件表达式"></textarea>
          </div>
          
          <div class="condition-type-section">
            <div class="control-label">条件类型</div>
            <div class="condition-type-options">
              <label>
                <input type="radio" name="condition-type" value="success" checked>
                <span>成功条件</span>
              </label>
              <label>
                <input type="radio" name="condition-type" value="failure">
                <span>失败条件</span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <div class="menu-item" id="edgeDelete">
        <button id="edge-delete-button">
          <div class="icon">
            <svg style="fill: #666" width="18" height="18" t="1741185246014" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14695" width="256" height="256"><path d="M834.24768 256c-14.15168 0-25.6 11.08992-25.6 24.79616v668.80512c0 13.66016-11.47392 24.80128-25.6 24.80128H226.74944c-14.12608 0-25.6-11.14112-25.6-24.80128V280.79616c0-13.70624-11.44832-24.79616-25.6-24.79616s-25.6 11.08992-25.6 24.79616v668.80512c0 41.02656 34.45248 74.39872 76.8 74.39872h556.29824c42.34752 0 76.8-33.37216 76.8-74.39872V280.79616c0-13.70624-11.44832-24.79616-25.6-24.79616zM336.21504 51.2h353.28a25.6 25.6 0 0 0 0-51.2h-353.28a25.6 25.6 0 0 0 0 51.2z" p-id="14696"></path><path d="M433.06496 846.99136v-558.08a25.6 25.6 0 0 0-51.2 0v558.08a25.6 25.6 0 0 0 51.2 0zM636.3392 846.99136v-558.08a25.6 25.6 0 0 0-51.2 0v558.08a25.6 25.6 0 0 0 51.2 0zM970.24 124.58496h-916.48a25.6 25.6 0 0 0 0 51.2h916.48a25.6 25.6 0 0 0 0-51.2z" p-id="14697"></path></svg>
          </div>
          
          <div class="unline">
            <svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DownBoldOutlined"><path d="m3.414 7.086-.707.707a1 1 0 0 0 0 1.414l7.778 7.778a2 2 0 0 0 2.829 0l7.778-7.778a1 1 0 0 0 0-1.414l-.707-.707a1 1 0 0 0-1.415 0l-7.07 7.07-7.072-7.07a1 1 0 0 0-1.414 0Z" fill="currentColor"></path></svg>
          </div>
        </button>
        
        <div class="delete-confirm-content">
          <div class="delete-message">
            <div class="warning-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm0-7a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm0-8a1 1 0 0 0-1 1v5a1 1 0 1 0 2 0V8a1 1 0 0 0-1-1z" fill="#f44336"/>
              </svg>
            </div>
            <div class="message-text">
              <div class="message-title">删除连接线</div>
              <div class="message-desc">此操作无法撤销</div>
            </div>
          </div>
          <button class="confirm-button">删除</button>
        </div>
      </div>
    </div>
</body>
</html>

